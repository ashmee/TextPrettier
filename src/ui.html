<form id="pluginState">
    <label class="point">
        <input
            class="switch"
            name="switch1"
            tabindex="0"
            type="checkbox"
            value="switch1" />
        Switch Enabled
    </label>
    <label class="point">
        <input
            class="switch"
            name="switch2"
            tabindex="1"
            type="checkbox"
            value="switch2" />
        Switch Enabled
    </label>
    <label class="point">
        <input
            class="switch"
            name="switch3"
            tabindex="2"
            type="checkbox"
            value="switch3" />
        Switch Enabled
    </label>
    <button id="updatePluginState" type="submit">Apply settings</button>
</form>
<style>
    * {
        box-sizing: border-box;
    }

    form {
        display: flex;
        flex-direction: column;
    }

    label {
        color: #777;
        font: 400 0.9rem/1.25 sohne, 'Helvetica Neue', Helvetica, Arial,
        sans-serif;
        text-indent: 0.5rem;
        user-select: none;
        margin: 1rem 0 0;
    }

    input {
        border: 2px solid #999;
        -webkit-border-radius: 0.35rem;
        -moz-border-radius: 0.35rem;
        border-radius: 0.35rem;
    }

    input:hover {
        border: 2px solid rgba(62, 61, 251, 0.85);
    }

    input[type='checkbox']:focus,
    button:focus {
        outline: 0;
    }

    .point {
        cursor: pointer;
    }

    input[type='checkbox'] {
        -webkit-appearance: none;
        -moz-appearance: none;
        position: relative;
        display: inline-block;
        background: white;
        cursor: pointer;
        height: 23px;
        margin: 0;
        padding: 0;
        vertical-align: middle;
        border: 2px solid #999;
        -webkit-transition: background 0.3s, border-color 0.3s, box-shadow 0.2s;
        transition: background 0.3s, border-color 0.3s, box-shadow 0.2s;
    }

    input[type='checkbox']:after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        -webkit-transition: opacity 0.2s, -webkit-transform 0.3s ease;
        transition: transform 0.3s ease, opacity 0.2s,
        -webkit-transform 0.3s ease;
    }

    input[type='checkbox']:checked {
        background: rgba(62, 61, 251, 0.85);
        border: 2px solid rgba(62, 61, 251, 0);
        -webkit-transition: opacity 0.3s,
        -webkit-transform 0.6s cubic-bezier(0.2, 0.85, 0.32, 1.2);
        transition: transform 0.6s cubic-bezier(0.2, 0.85, 0.32, 1.2),
        opacity 0.3s,
        -webkit-transform 0.6s cubic-bezier(0.2, 0.85, 0.32, 1.2);
    }

    input[type='checkbox']:disabled {
        cursor: not-allowed;
        border: 2px solid #bbc1e1;
        opacity: 0.9;
    }

    input[type='checkbox']:disabled:checked {
        background: #e1e6f9;
    }

    input[type='checkbox']:disabled + label {
        cursor: not-allowed;
    }

    input[type='checkbox']:hover:not(:checked):not(:disabled) {
        border: 2px solid rgba(62, 61, 251, 0.85);
    }

    input[type='checkbox'].switch {
        width: 38px;
        border-radius: 11px;
    }

    input[type='checkbox'].switch:after {
        top: 2px;
        left: 2px;
        background: #999;
        width: 15px;
        height: 15px;
        border-radius: 50%;
        -webkit-transform: translateX(0);
        transform: translateX(0);
    }

    input[type='checkbox'].switch:checked:after {
        background: white;
        -webkit-transform: translateX(15px);
        transform: translateX(15px);
    }

    input[type='checkbox'].switch:disabled:not(:checked):after {
        opacity: 0.6;
    }

    *:before,
    *:after {
        box-sizing: inherit;
    }

    button {
        margin: 0;
        font-weight: 400;
        font-family: sohne, 'Helvetica Neue', Helvetica, Arial, sans-serif;
        font-size: 14px;
        line-height: 20px;
        padding: 7px 16px 9px;
        border: none;
        border-radius: 4px;
        box-sizing: border-box;
        color: rgba(255, 255, 255, 1);
        background-color: rgba(62, 61, 251, 0.85);
        transition: background-color 0.6s cubic-bezier(0.2, 0.85, 0.32, 1.2);
    }

    button:hover {
        font-family: sohne, 'Helvetica Neue', Helvetica, Arial, sans-serif;
        cursor: pointer;
        background-color: rgba(62, 61, 251, 1);
    }

</style>
<script>
    const main = document.getElementById('settings')

    document.getElementById('updatePluginState').onclick = () => {
        console.log('clickedclicked')
        parent.postMessage(
            {pluginMessage: {type: 'updatePluginState'}},
            '*'
        )
    }

    document.getElementById('cancel').onclick = () => {
        console.log('clicked')
        parent.postMessage({pluginMessage: {type: 'close'}}, '*')
    }

    //    document.querySelector('#setApiKey').onsubmit = e => {
    //        e.preventDefault()
    //        window.parent.postMessage({
    //            pluginMessage: document.getElementById('apiKey').value
    //        }, '*')
    //    }
    //
    //    window.onmessage = async (event) => {
    //        if (event.data.pluginMessage.type === 'key') {
    //            document.getElementById('apiKey').value = event.data.pluginMessage.apikey || ''
    //        }
    //        if (event.data.pluginMessage.type === 'run') {
    //
    //            let data = new FormData(),
    //                base64 = btoa(new Uint8Array(event.data.pluginMessage.bytes).reduce((data, byte) => {
    //                    return data + String.fromCharCode(byte)
    //                }, ''));
    //
    //            data.append('image_file_b64', base64)
    //
    //            fetch('https://api.remove.bg/v1/removebg', {
    //                method: 'POST',
    //                headers: {
    //                    'X-Api-Key': event.data.pluginMessage.apikey,
    //                    'Accept': 'application/json'
    //                },
    //                body: data
    //            }).then(response => {
    //                if (!response.ok) {
    //                    throw response
    //                }
    //                return response
    //            }).then(response => {
    //                response.json().then(res => {
    //                    window.parent.postMessage({
    //                        pluginMessage: Uint8Array.from(atob(res.data.result_b64), c => c.charCodeAt(0))
    //                    }, '*')
    //                })
    //            }).catch(response => {
    //                response.json().then(res => {
    //                    window.parent.postMessage({
    //                        pluginMessage: res
    //                    }, '*')
    //                })
    //            })
    //        }
    //     }
</script>
